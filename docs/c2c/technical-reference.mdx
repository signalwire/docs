---
title: "Technical Reference"
description: "Complete reference for Click-to-Call configuration options and parameters"
sidebar_position: 1
slug: /c2c/technical-reference
---

# Technical Reference

This page provides a comprehensive reference for the Click-to-Call API, including all available configuration parameters and their usage.

## Snippet Structure

The Click-to-Call snippet consists of two main parts:

1. **Async Loader IIFE**: Loads required resources and authenticates with SignalWire services
2. **Component Initialization**: The `sw.c2c.spawn` method call that configures and renders the widget

```javascript
// Async Loader IIFE - Do not modify this section
(a => {
  // Loader implementation
  // ...
})({ apiKey: "c2c_XXXXXXXXXXXXXXXXXXXXX", v: "0.0.1" });

// Component Initialization - Can be customized
sw.c2c.spawn('C2CButton', {
  // Configuration parameters
  destination: '/public/example',
  buttonParentSelector: '#click2call',
  callParentSelector: '#call',
  // Additional parameters as needed
});
```

:::danger
Never modify the Async Loader IIFE portion of the snippet. If you need to change the API key or other connection settings, generate a new snippet from the SignalWire Dashboard.
:::

## C2C Spawn Method

### Syntax

```javascript
sw.c2c.spawn(componentName, configOptions)
```

| Parameter | Type | Description |
|:----------|:-----|:------------|
| `componentName` | `string` | The component to initialize. Currently only `'C2CButton'` is supported. |
| `configOptions` | `object` | Configuration options that define the behavior and appearance of the C2C widget. |

## Configuration Parameters

The following parameters can be passed in the `configOptions` object to customize the C2C widget.


| Parameter | Type | Required | Description | Example |
|:----------|:-----|:---------|:------------|:--------|
| `destination` | `string` | Yes | The destination address to call, using SignalWire Address format. | `'/public/support'` |
| `buttonParentSelector` | `string` | Yes | CSS selector for the element where the call button will be rendered. | `'#click2call'` |
| `callParentSelector` | `string` | Yes | CSS selector for the element where the call widget will be displayed. | `'#call'` |
| `innerHTML` | `string` | No | Optional HTML markup to render a custom button. If not provided, a default button will be used. | `'<button class="my-btn">Call Us</button>'` |
| `beforeCallStartFn` | `function` | No | Called when user clicks to start a call, before call setup begins. Return `true` to proceed with the call or `false` to cancel. | |
| `afterCallStartFn` | `function` | No | Called after call setup completes and the connection is established. Useful for updating UI elements or tracking call start events. | |
| `beforeCallLeaveFn` | `function` | No | Called when user or system initiates call end, before teardown begins. Return `true` to proceed with hanging up or `false` to cancel. | |
| `afterCallLeaveFn` | `function` | No | Called after call has fully ended and the widget is removed from view. | |
| `onCallError` | `function` | No | Called if any error occurs during the call setup process. Receives the error object as a parameter.  | |

## Parameter Details

### destination

The destination address to call, using SignalWire Address format. This parameter is required and bound to the destinations selected when the snippet was created in the dashboard.

```javascript
sw.c2c.spawn('C2CButton', {
  destination: '/public/support',
  // Other parameters...
});
```

:::warning
The `destination` parameter must reference a valid destination that was selected when creating the C2C widget in the dashboard.
:::

### buttonParentSelector

CSS selector for the HTML element where the call button will be rendered. This element must exist in the DOM when the `sw.c2c.spawn` method is called.

```javascript
sw.c2c.spawn('C2CButton', {
  buttonParentSelector: '#my-call-button-container',
  // Other parameters...
});
```

```html
<!-- Target element in your HTML -->
<div id="my-call-button-container"></div>
```

### callParentSelector

CSS selector for the HTML element where the call widget will be displayed when a call is active. This element must exist in the DOM when the `sw.c2c.spawn` method is called.

```javascript
sw.c2c.spawn('C2CButton', {
  callParentSelector: '#my-call-widget-container',
  // Other parameters...
});
```

```html
<!-- Target element in your HTML -->
<div id="my-call-widget-container"></div>
```

### innerHTML

Optional HTML markup to render a custom call button. If not provided, a default button will be used.

```javascript
sw.c2c.spawn('C2CButton', {
  innerHTML: '<button class="my-custom-button"><i class="icon-phone"></i> Call Support</button>',
  // Other parameters...
});
```

This parameter allows you to fully customize the appearance of the call button to match your website's design.

### beforeCallStartFn

A callback function that is called before a call is initiated. It should return `true` to proceed with the call or `false` to cancel.

```javascript
sw.c2c.spawn('C2CButton', {
  beforeCallStartFn: () => {
    // Check if it's during business hours
    const now = new Date();
    const hour = now.getHours();
    
    if (hour < 9 || hour >= 17) {
      alert('Our call center is only available from 9 AM to 5 PM.');
      return false; // Don't proceed with the call
    }
    
    // Show a loading spinner
    document.getElementById('loading').style.display = 'block';
    
    return true; // Proceed with the call
  },
  // Other parameters...
});
```

Common uses for this callback include:

- Validating form data before initiating a call
- Performing business hours checks
- Showing loading indicators
- Confirming with the user that they want to start a call

### afterCallStartFn

A callback function that is called after a call has been successfully connected.

```javascript
sw.c2c.spawn('C2CButton', {
  afterCallStartFn: () => {
    // Hide the loading spinner
    document.getElementById('loading').style.display = 'none';
    
    // Hide the call button during the call
    document.getElementById('call-button-container').style.display = 'none';
    
    console.log('Call connected successfully');
  },
  // Other parameters...
});
```

Common uses for this callback include:

- Hiding the call button while a call is active
- Updating UI elements to reflect the active call state
- Triggering analytics events
- Adjusting page layout to accommodate the call widget

### beforeCallLeaveFn

A callback function that is called before a call is hung up. It should return `true` to proceed with hanging up or `false` to cancel.

```javascript
sw.c2c.spawn('C2CButton', {
  beforeCallLeaveFn: () => {
    // Ask for confirmation
    return confirm('Are you sure you want to end this call?');
  },
  // Other parameters...
});
```

Common uses for this callback include:

- Showing confirmation dialogs before ending a call
- Performing cleanup operations
- Preparing UI elements for the call end state

### afterCallLeaveFn

A callback function that is called after a call has ended and the widget is no longer visible.

```javascript
sw.c2c.spawn('C2CButton', {
  afterCallLeaveFn: () => {
    // Show the call button again
    document.getElementById('call-button-container').style.display = 'block';
    
    // Maybe show a feedback form
    document.getElementById('call-feedback').style.display = 'block';
    
    console.log('Call ended');
  },
  // Other parameters...
});
```

Common uses for this callback include:

- Restoring UI elements to their pre-call state
- Showing feedback forms
- Triggering analytics events
- Re-enabling form elements or interactive components

### onCallError

A callback function that is called if any error occurs during call setup. It receives the error object as a parameter.

```javascript
sw.c2c.spawn('C2CButton', {
  onCallError: (error) => {
    console.error('Call error:', error);
    
    // Hide any loading indicators
    document.getElementById('loading').style.display = 'none';
    
    // Show an appropriate error message to the user
    if (error.name === 'MediaDeviceError') {
      alert('Please ensure your microphone is connected and you have granted permission to use it.');
    } else {
      alert('Sorry, we couldn\'t connect your call. Please try again later.');
    }
  },
  // Other parameters...
});
```

Common uses for this callback include:

- Displaying user-friendly error messages
- Logging errors for debugging purposes
- Hiding loading indicators or resetting UI elements
- Implementing retry logic

## Complete Example

Here's a complete example that demonstrates all available configuration parameters:

```javascript
sw.c2c.spawn('C2CButton', {
  // Core parameters
  destination: '/public/support',
  buttonParentSelector: '#click2call',
  callParentSelector: '#call',
  innerHTML: '<button class="custom-call-button">Contact Support</button>',
  
  // Callback parameters
  beforeCallStartFn: () => {
    console.log('Preparing to start call...');
    document.getElementById('loading').style.display = 'block';
    return true;
  },
  
  afterCallStartFn: () => {
    console.log('Call connected!');
    document.getElementById('loading').style.display = 'none';
    document.getElementById('click2call').style.display = 'none';
  },
  
  beforeCallLeaveFn: () => {
    return confirm('Are you sure you want to end this call?');
  },
  
  afterCallLeaveFn: () => {
    console.log('Call ended.');
    document.getElementById('click2call').style.display = 'block';
    document.getElementById('feedback-form').style.display = 'block';
  },
  
  onCallError: (error) => {
    console.error('Call error:', error);
    document.getElementById('loading').style.display = 'none';
    alert('Sorry, we couldn\'t connect your call. Please try again later.');
  }
}); 