---
title: "RoomSessionStream"
slug: /video/roomsession-stream
sidebar_label: RoomSessionStream
---

[roomsession]: ./video-roomsession.mdx
[roomsessionstream-1]: ./video-roomsessionstream.mdx
[video-roomsession]: ./video-roomsession.mdx#startstream

Represents a specific stream of a room session. This is an RTMP stream of the
audio/video content of the room, which will be sent to an external party (e.g.,
to YouTube).

You can start a stream with [RoomSession.startStream][video-roomsession].

## **Properties**

<APIField name="id" type="string" required={true}>
  The unique id of this stream.
</APIField>

<APIField name="roomId" type="string" required={true}>
  The id of the room associated to this stream.
</APIField>

<APIField name="roomSessionId" type="string" required={true}>
  The id of the room session associated to this stream.
</APIField>

<APIField name="state" type='"streaming" | "completed"' required={true}>
  Current state of the stream.
</APIField>

<APIField name="url" type="string">
  The RTMP URL of the stream.
</APIField>

<APIField name="duration" type="number">
  Total seconds of time spent streaming, if available. This is equal to (`endedAt` - `startedAt`).
</APIField>

<APIField name="startedAt" type="Date">
  Start time, if available.
</APIField>

<APIField name="endedAt" type="Date">
  End time, if available.
</APIField>

<APIField name="hasEnded" type="boolean" required={true}>
  Whether the stream has ended. Returns `true` if the state is `"completed"`.
</APIField>

## **Methods**

### stop

▸ **stop**(): `Promise<void>`

Stops the stream.

#### Returns

`Promise<void>`

#### Example

In this example, we wait for a room to start and then start
a stream in that room. We then stop the stream after 10 seconds.
This example assumes that there is a [`RoomSession`][roomsession] already active and that members are joining the room.

```javascript
import { SignalWire } from "@signalwire/realtime-api";

// Initialize the SignalWire client
const client = await SignalWire({ project: "ProjectID Here", token: "Token Here" });

// Access video client from the main client
const videoClient = client.video;

// Setup listener for when a room starts
await videoClient.listen({
  onRoomStarted: async (roomSession) => {
    console.log("Room started", roomSession.displayName);

    roomSession.startStream({
      url: "rtmp://example.com/stream"
    })

    await roomSession.listen({
      onStreamStarted: async (stream) => {
        console.log("Stream started", stream.state);

        // Wait 10 seconds and stop the stream
        setTimeout(() => {
          console.log("Stopping stream");
          stream.stop();
        }, 10000);
      },
      onStreamEnded: (stream) => {
        console.log("Stream ended", stream.id, stream.state);
      },
    });
  },
  onRoomEnded: async (roomSession) => {
    console.log("Room ended", roomSession.displayName);
  }
});
```

## **Events**

### onStarted

▸ **RoomSessionStream**(`{ listen: {onStarted: Callback }}`)

Emitted when the stream has started.

#### Parameters

<APIField name="stream" type="RoomSessionStream" required={true}>
  The stream that has started. See [`RoomSessionStream`][roomsessionstream-1].
</APIField>

### onEnded

▸ **RoomSessionStream**(`{ listen: {onEnded: Callback } }`)

Emitted when the stream has ended.

#### Parameters

<APIField name="stream" type="RoomSessionStream" required={true}>
  The stream that has ended. See [`RoomSessionStream`][roomsessionstream-1].
</APIField>
