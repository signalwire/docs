---
slug: /voice/call-prompt
sidebar_label: CallPrompt
---

[callprompt]: #
[type]: #field-type
[prompt]: ./voice-call.mdx#prompt
[promptAudio]: ./voice-call.mdx#promptaudio
[promptRingtone]: ./voice-call.mdx#promptringtone
[promptTTS]: ./voice-call.mdx#prompttts

# CallPrompt

Represents a current or past prompting session in a call. 

Obtain instances of this class by starting a Prompt with one of the following methods:

- [`Call.prompt`][prompt]
- [`Call.promptAudio`][promptAudio]
- [`Call.promptRingtone`][promptRingtone]
- [`Call.promptTTS`][promptTTS]

#### Example

Prompting for a PIN to be entered using the keypad, then waiting for the user to
finish entering the PIN before proceeding with the next instructions.

```js
import { SignalWire } from "@signalwire/realtime-api";

const client = await SignalWire({ project: "ProjectID Here", token: "Token Here" })

const call = await client.voice.dialPhone({
  from: "+YYYYYYYYYY",
  to: "+XXXXXXXXXX",
});

// Prompt for digits
await call.promptTTS({
  text: "Please enter your PIN",
  digits: {
    max: 5,
    digitTimeout: 5,
    terminators: "#*",
  },
  listen: {
    onStarted: () => console.log("Prompt started"),
    onUpdated: (event) => console.log("Prompt updated", event.result),
    onEnded: async (event) => {
      console.log("Prompt ended", event.result);
      console.log("Users Pin", event.digits);
      call.hangup();
    },
    onFailed: () => console.log("Prompt failed"),
  }
}).onStarted();
```

## **Properties**

<APIField name="confidence" type="number">
  Confidence level for the speech recognition result (if [`type`][type] is `"speech"`), from 0 to 100. For example, `83.2`.
</APIField>

<APIField name="digits" type="string">
  The digits that have been collected (if [`type`][type] is `"digit"`). For example, `"12345"`.
</APIField>

<APIField name="id" type="string">
  The unique id for this prompt.
</APIField>

<APIField name="reason" type='"no_match" | "no_input" | "error"'>
  Alias for [`type`][type], in case of errors. Use this field to check the reason of the error.
</APIField>

<APIField name="terminator" type="string">
  The terminator used to complete the prompt (if [`type`][type] is `"digit"`). For example, `"#"`.
</APIField>

<APIField name="text" type="string">
  The text that has been collected (if [`type`][type] is `"speech"`). For example, `"hello who's there"`.
</APIField>

<APIField name="type" type='"error" | "no_input" | "no_match" | "digit" | "speech"'>
  The type of this prompt.
</APIField>

<APIField name="result" type="object">
  The raw result object from the prompt operation.
</APIField>

<APIField name="speech" type="string">
  Alias for [`text`][type]. The text that has been collected (if [`type`][type] is `"speech"`).
</APIField>

<APIField name="hasEnded" type="boolean">
  Whether the prompt has ended. Returns `true` if the result type is one of: `"no_input"`, `"error"`, `"no_match"`, `"digit"`, or `"speech"`.
</APIField>

## **Methods**

### ended

▸ **ended**(): `Promise`\<[`CallPrompt`][callprompt]>

Returns a promise that is resolved only after this prompt finishes (or is stopped).

#### Returns

`Promise`\<[`CallPrompt`][callprompt]>

A promise that is resolves to [`CallPrompt`][callprompt] when the prompt has been ended.

#### Example

```js
const prompt = await call.promptTTS({
  text: "Please enter your PIN",
  digits: {
    max: 5,
    digitTimeout: 2,
    terminators: "#*",
  },
});
const { type, digits, terminator } = await prompt.ended();
```

---

### setVolume

▸ **setVolume**(`volume`): `Promise`\<[`CallPrompt`][callprompt]>

Changes the volume of the audio.

#### Parameters

<APIField name="volume" type="number" required={true}>
  Volume value between -40dB and +40dB.
</APIField>

#### Returns

`Promise`\<[`CallPrompt`][callprompt]>

A promise that is resolves to [`CallPrompt`][callprompt] when the volume is changed.

#### Example

```js
const prompt = await call.promptTTS({
  text: "Please enter your PIN",
  digits: {
    max: 5,
    digitTimeout: 2,
    terminators: "#*",
  },
});
await prompt.setVolume(-20);
```

---

### stop

▸ **stop**(): `Promise`\<[`CallPrompt`][callprompt]>

Stops the prompt.

#### Returns

`Promise`\<[`CallPrompt`][callprompt]>

A promise that is resolves to [`CallPrompt`][callprompt] when the prompt stops.

#### Example

```js
const prompt = await call.promptTTS({
  text: "Please enter your PIN",
  digits: {
    max: 5,
    digitTimeout: 2,
    terminators: "#*",
  },
});
await prompt.stop();
```

---

## **Events**

### onStarted

▸ **CallPrompt.listen**(`{ onStarted: Callback }}`)

Emitted when the prompt starts. Your event handler will receive an instance of [`CallPrompt`][callprompt].

#### Parameters

<APIField name="prompt" type="CallPrompt" required={true}>
  The prompt that started. See [`CallPrompt`][callprompt].
</APIField>

### onUpdated

▸ **CallPrompt.listen**(`{ onUpdated: Callback }}`)

Emitted when the prompt is updated. Your event handler will receive an instance of [`CallPrompt`][callprompt].

#### Parameters

<APIField name="prompt" type="CallPrompt" required={true}>
  The prompt that updated. See [`CallPrompt`][callprompt].
</APIField>

### onFailed

▸ **CallPrompt.listen**(`{ onFailed: Callback }}`)

Emitted when the prompt fails. Your event handler will receive an instance of [`CallPrompt`][callprompt].

#### Parameters

<APIField name="prompt" type="CallPrompt" required={true}>
  The prompt that failed. See [`CallPrompt`][callprompt].
</APIField>

### onEnded

▸ **CallPrompt.listen**(`{ onEnded: Callback }}`)

Emitted when the prompt ends. Your event handler will receive an instance of [`CallPrompt`][callprompt].

#### Parameters

<APIField name="prompt" type="CallPrompt" required={true}>
  The prompt that ended. See [`CallPrompt`][callprompt].
</APIField>
