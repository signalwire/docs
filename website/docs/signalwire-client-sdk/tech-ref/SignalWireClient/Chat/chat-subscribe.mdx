---
title: chat.subscribe
slug: /signalwire-client/chat-subscribe
---

import APIField from '@site/src/components/APIField';

Subscribes to real-time chat message events in a conversation, allowing you to receive notifications when new messages arrive.

## How it works

The `chat.subscribe` method establishes a real-time subscription to chat events. When new messages are sent in the conversation, your callback function is invoked with the message details.

## Key concepts

### Real-time updates

Subscriptions provide:
- Instant message notifications
- Live chat updates
- Event-driven architecture
- Bi-directional communication

### Event handling

Your callback receives:
- New messages
- Message metadata
- Sender information
- Timestamps

## Parameters

<APIField name="params" type="ConversationChatMessagesSubscribeParams" required>
  Configuration for the subscription.
</APIField>

<APIField name="params.conversationId" type="string" required>
  The unique identifier of the conversation to subscribe to.
</APIField>

<APIField name="params.onMessage" type="(message: ChatMessage) => void" required>
  Callback function invoked when new messages arrive.
</APIField>

## Signature

```typescript
chat.subscribe(params: ConversationChatMessagesSubscribeParams): Promise<ConversationSubscribeResult>
```

## Returns

**Type:** `Promise<ConversationSubscribeResult>`

Returns a Promise that resolves with subscription details including an unsubscribe method.

## Examples

### Subscribe to messages

```typescript
const subscription = await client.chat.subscribe({
  conversationId: 'conversation-id-here',
  onMessage: (message) => {
    console.log('New message from', message.from)
    console.log('Content:', message.content)
  }
})
```

### Display messages in UI

```typescript
await client.chat.subscribe({
  conversationId: 'conversation-id-here',
  onMessage: (message) => {
    const chatContainer = document.getElementById('chat-messages')
    
    const messageDiv = document.createElement('div')
    messageDiv.className = 'message'
    messageDiv.textContent = `${message.from}: ${message.content}`
    
    chatContainer.appendChild(messageDiv)
    chatContainer.scrollTop = chatContainer.scrollHeight
  }
})
```

### Subscribe with timestamp

```typescript
await client.chat.subscribe({
  conversationId: 'conversation-id-here',
  onMessage: (message) => {
    const time = new Date(message.timestamp).toLocaleTimeString()
    console.log(`[${time}] ${message.from}: ${message.content}`)
  }
})
```

### Unsubscribe when done

```typescript
const subscription = await client.chat.subscribe({
  conversationId: 'conversation-id-here',
  onMessage: (message) => {
    console.log('Message:', message.content)
  }
})

await subscription.unsubscribe()
console.log('Unsubscribed from chat')
```

### Error handling

```typescript
try {
  await client.chat.subscribe({
    conversationId: 'conversation-id-here',
    onMessage: (message) => {
      displayMessage(message)
    }
  })
  console.log('Subscribed to chat updates')
} catch (error) {
  console.error('Failed to subscribe:', error)
}
```

### Filter messages by type

```typescript
await client.chat.subscribe({
  conversationId: 'conversation-id-here',
  onMessage: (message) => {
    if (message.metadata?.type === 'announcement') {
      displayAnnouncement(message)
    } else {
      displayRegularMessage(message)
    }
  }
})
```

### Play notification sound

```typescript
const notificationSound = new Audio('/notification.mp3')

await client.chat.subscribe({
  conversationId: 'conversation-id-here',
  onMessage: (message) => {
    displayMessage(message)
    
    if (message.from !== currentUserId) {
      notificationSound.play()
    }
  }
})
```

### Subscribe during call

```typescript
const callSession = await client.dial({
  to: '+15551234567',
  from: '+15559876543'
})

await client.chat.join({
  conversationId: callSession.conversationId
})

await client.chat.subscribe({
  conversationId: callSession.conversationId,
  onMessage: (message) => {
    console.log('Chat message:', message.content)
  }
})
```

### Manage subscription lifecycle

```typescript
let chatSubscription = null

async function enableChat(conversationId) {
  chatSubscription = await client.chat.subscribe({
    conversationId: conversationId,
    onMessage: (message) => {
      displayMessage(message)
    }
  })
}

async function disableChat() {
  if (chatSubscription) {
    await chatSubscription.unsubscribe()
    chatSubscription = null
  }
}
```

### Track message count

```typescript
let messageCount = 0

await client.chat.subscribe({
  conversationId: 'conversation-id-here',
  onMessage: (message) => {
    messageCount++
    document.getElementById('message-count').textContent = messageCount
    displayMessage(message)
  }
})
```

