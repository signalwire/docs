---
title: "Authentication"
sidebar_position: 1
---

# Authentication

The SignalWire Client SDK is a browser-side library. The source code for all browser-side code is publicly available, so
we cannot use the same token authentication method as the REST API.

Authentication is scoped to [subscribers](/sdks/signalwire-client-sdk/about_call_fabric#subscribers).
You can create subscribers either through the dashboard or through the REST API.
For temporary usage, you can create a guest token which creates a temporary subscriber
with limited permissions to access only the specified `allowed_address`.

Depending on your use-case, several methods for authentication are available, which ensure security and scoped access.

## OAuth2 Subscriber Log-In

When you create a Subscriber, either through the REST API or the Dashboard,
you assign them a username (email) and a password. These credentials
can be used authenticate the subscriber using the standard OAuth2 flow with PKCE. For OAuth2, you
can use tools like [odic-client-ts](https://github.com/authts/oidc-client-ts) or
[react-native-app-auth](https://github.com/FormidableLabs/react-native-app-auth).

:::info
Currently, the only way to get a client ID for the OAuth2 flow is through the SignalWire Support team.
:::

<Tabs>
<TabItem label="oidc-client-ts" value="web">

```js
import { UserManager, WebStorageStateStore } from "oidc-client-ts";

const config = {
  authority: "x", // dummy authority
  metadata: {
    issuer: "https://id.fabric.signalwire.com/",
    authorization_endpoint: "https://id.fabric.signalwire.com/login/oauth/authorize",
    token_endpoint: "https://id.fabric.signalwire.com/oauth/token",
  },
  client_id: "<Your_Fabric_Client_id>",
  redirect_uri: "https://redirect_uri",
  response_type: "code",
  userStore: new WebStorageStateStore({ store: window.localStorage }),
};

const userManager = new UserManager(config);

await userManager.signinRedirect();
```

</TabItem>

<TabItem label="react-native-app-auth" value="mobile">

```js
import { authorize } from "react-native-app-auth";

const config = {
  serviceConfiguration: {
    authorizationEndpoint: "https://id.fabric.signalwire.com/login/oauth/authorize",
    tokenEndpoint: "https://id.fabric.signalwire.com/oauth/token",
  },

  clientId: "<Your_Fabric_Client_id>",
  redirectUrl: "your app's redirect uri",
  clientAuthMethod: "post",
};

const result = await authorize(config);
```

</TabItem>
</Tabs>

A complete example is presented below.
Assuming that this page is [`npx serve`d](https://www.npmjs.com/package/serve) at the address `http://localhost:3000`, this script takes the subscriber
through the OAuth2 login flow, and uses the access token received to fetch the subscriber's registration details from SignalWire.

<AccordionGroup>

<Accordion title="Full Example">

{/* prettier-ignore */}

```html title="index.html"
<html>
  <head>
    <style>
      .loading > button {
        display: none;
      }
      .loading::after {
        content: "Loading...";
      }
    </style>
  </head>

  <body>
    <div id="container" class="loading">
      <button onclick="userManager.signinRedirect()">Log In</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/oidc-client-ts@3.0.1/dist/browser/oidc-client-ts.min.js"></script>
    <script src="https://cdn.signalwire.com/@signalwire/js"></script>
    <script>
      const container = document.getElementById("container");

      const config = {
        authority: "x", // dummy authority
        metadata: {
          issuer: "https://id.fabric.signalwire.com/",
          authorization_endpoint:
            "https://id.fabric.signalwire.com/login/oauth/authorize",
          token_endpoint: "https://id.fabric.signalwire.com/oauth/token",
        },
        client_id: "<Your_Fabric_Client_id>",
        redirect_uri: "http://localhost:3000", // assuming this page is being served at port 3000 of localhost
        response_type: "code",
        userStore: new oidc.WebStorageStateStore({ store: window.localStorage }),
      };

      const userManager = new oidc.UserManager(config);

      async function checkForRedirect() {
        try {
          const user = await userManager.signinRedirectCallback();
          if (user) {
            // the oauth flow completed successfully, we can now use Call Fabric features using the access token.
            await getSubscriberInfo(user.access_token);
          }
        } catch (e) {
          // signinRedirectCallback failed; login flow hasn't been started yet. We'll show the Login button.
          container.classList.remove("loading");
        }
      }

      async function getSubscriberInfo(token) {
        const client = await SignalWire.SignalWire({ token });
        const subInfo = await client.getSubscriberInfo();

        container.classList.remove("loading");
        container.innerText = `Hello, ${subInfo.first_name}`;
      }

      // We want to check if the user was redirected here from the subscriber login flow,
      // or if the came here directly from the browser. If the user came directly from the
      // browser, we show a Login button. If they were redirected here, we allow oidc-client-ts
      // to finish the flow and get the access token.
      checkForRedirect();
    </script>
  </body>
</html>
```

</Accordion>

</AccordionGroup>

#### When to use?

Use this method if you're creating a new subscriber for each end-user of your application. With OAuth2,
they'll be able to log into your application and use your application's features without the need for a backend or
authentication logic on your part.

import { TbApi } from "react-icons/tb";

## REST API Token Authentication

You can obtain authentication tokens directly through the REST API. The following endpoints are available for token generation:

:::info
For browser-based applications, we recommend using the OAuth2 flow to
authenticate subscribers and obtain tokens. See
[Authenticate subscribers using OAuth2](#oauth2-subscriber-log-in) below for details.
:::

### Guest Token Authentication

This method creates a temporary subscriber with limited permissions to access only the specified `allowed_addresses`.

<CardGroup cols={1}>
<Card 
  title="Create a Guest Token" 
  icon={<TbApi/>} 
  href="/rest/signalwire-rest/endpoints/fabric/guest-tokens-create"
/>
</CardGroup>

#### When to use?

If you have a backend, and would like to generate a token for a specific resource without creating a new
permanent subscriber, this is the method to use.

### Subscriber Invite Token Authentication

Use this method if you're creating a subscriber invite token for a specific subscriber. This is useful if you're creating a
temporary link for a user to access a specific resource.

This method generates a token to access resources associated with a specific subscriber on behalf of the subscriber.

<CardGroup cols={1}>
<Card 
  title="Create a Subscriber Invite Token" 
  icon={<TbApi/>} 
  href="/rest/signalwire-rest/endpoints/fabric/invite-tokens-create"
/>
</CardGroup>

#### When to use?

Use this method if you already have a Subscriber, and would like to allow them to access resources; or if you would like to
access a resource on behalf of a Subscriber.

### Subscriber Token Authentication

This method creates a new subscriber and returns their token.

<CardGroup cols={1}>
<Card 
  title="Create a new Subscriber and a Token" 
  icon={<TbApi/>} 
  href="/rest/signalwire-rest/endpoints/fabric/subscriber-tokens-create"
>
  Create a new subscriber and get their token in a single request.
</Card>
</CardGroup>

#### When to use?

Use this method if you're creating a new subscriber and need to get their token in a single request.

### Exchange a C2C token for a Guest Token

The [C2C widget](/tools/c2c) is a great tool to quickly embed resources into your website. When you
create a new C2C widget from the dashboard, you can assign a specific resource that can be accessed by it.
That C2C token can then be copied, and exchanged for a Guest Token to access the resource. This particular
method is great if you don't have a backend, and you need to access a particular resource.

This particular REST API call can be performed from the browser.

<CardGroup cols={1}>
<Card 
  title="Exchange a C2C token for a Guest Token" 
  icon={<TbApi/>} 
  href="/rest/signalwire-rest/endpoints/fabric/embeds-tokens-create"
>
  Create a new subscriber and get their token in a single request.
</Card>
</CardGroup>

#### When to use?

Use this method if you don't have a backend, and you need to access a particular resource that is protected by a C2C token. The C2C 
token is assumed to be public, so it is not necessary to authenticate it.

## Choosing the right authentication method

Use this comparison table to select the authentication method that best fits your use case:

| Authentication Method        | Needs Backend | Handles User Auth          | Access Scope                      | Duration      | Best For                                                                    |
| ---------------------------- | ------------- | -------------------------- | --------------------------------- | ------------- | --------------------------------------------------------------------------- |
| **OAuth2 Subscriber Log-In** | No            | Yes                        | Multiple resources per subscriber | Persistent    | Production apps where each end-user needs their own subscriber account      |
| **Guest Token**              | Yes           | No                         | Selected resources           | Temporary     | Quick access to a specific resource without creating a permanent subscriber |
| **Subscriber Invite Token**  | Yes           | No                         | Multiple resources per subscriber | Session-based | Accessing resources on behalf of an existing subscriber                     |
| **Subscriber Token**         | Yes           | No                         | Multiple resources per subscriber | Session-based | Creating new subscribers and getting tokens in a single request             |
| **C2C Token Exchange**       | No            |C2C tokens are assumed public|Single resource           | Temporary     | Simple static websites needing access to a specific resource                |

## Using the Token

After you have received the access token by an authentication method, you can use that token to initialize the [SignalWire Client](./SignalWireClient/index.mdx):

```js
import { SignalWire } from "@signalwire/client";

const client = await SignalWire({
  token: "eyJhbGciOiJIUzI1NiIs...",
});
```
