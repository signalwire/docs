---
title: connect
sidebar_label: connect
slug: /swml/methods/connect
description: Dial a SIP URI or phone number.
tags: ['swml']
---

import APIField from "@site/src/components/APIField";

Dial a SIP URI or phone number.

<APIField
  name="connect"
  type="object"
  required={true}
>
  An object that contains the [`connect parameters`](#connect-parameters).
</APIField>


## **connect Parameters**

<APIField
  name="connect.answer_on_bridge"
  type="boolean"
  default="false"
>
  Delay answer until the B-leg answers.
</APIField>

<APIField
  name="connect.call_state_events"
  type="string[]"
  default="['ended']"
>
  An array of call state event names to be notified about. Allowed event names are `created`, `ringing`, `answered`, and `ended`. Can be overwritten on each [destination](#parameters-for-destination).
</APIField>

<APIField
  name="connect.call_state_url"
  type="string"
>
  Webhook url to send call status change notifications to for all legs. Can be overwritten on each [destination](#parameters-for-destination). Authentication can also be set in the url in the format of `username:password@url`.
</APIField>

<APIField
  name="connect.codecs"
  type="string"
  default="Based on SignalWire settings"
>
  Comma-separated string of codecs to offer. Has no effect on calls to phone numbers.
</APIField>

<APIField
  name="connect.confirm"
  type="string"
>
  A URL that returns [SWML](/swml) to execute when the call is connected.
</APIField>

<APIField
  name="connect.confirm_timeout"
  type="integer"
  default="60 seconds"
>
  The amount of time, in seconds, to wait for the `confirm` URL to return a response.
</APIField>

<APIField
  name="connect.encryption"
  type="string"
  default="optional"
>
  The encryption method to use for the call.<br/>**Possible values:** `mandatory`, `optional`, `forbidden`.
</APIField>

<APIField
  name="connect.from"
  type="string"
  default="Calling party's caller ID number"
>
  Caller ID number. Optional. Can be overwritten on each [destination](#parameters-for-destination).
</APIField>

<APIField
  name="connect.headers"
  type="object[]"
>
  Custom SIP headers to add to INVITE. Has no effect on calls to phone numbers. The object accepts [headers parameters](./headers.mdx#headers-parameters).

  See [`headers`](./headers.mdx) for details.
</APIField>

<APIField
  name="connect.max_duration"
  type="integer"
  default="14400 seconds (4 hours)"
>
  Maximum duration, in seconds, allowed for the call.
</APIField>

<APIField
  name="connect.result"
  type="object | object[]"
>
  Action to take based on the result of the call. This will run once the peer leg of the call has ended.

  Will use the [`switch method parameters`](./switch#switch-parameters) when the `return_value` is a object, and will use the [`cond method parameters`](./cond#cond-parameters) method when the `return_value` is an array.<br/> See [Variables](#variables) for details.
</APIField>

<APIField
  name="connect.ringback"
  type="string[]"
  default="Plays audio from the provider"
>
  Array of `play` URIs to play as ringback tone.
</APIField>

<APIField
  name="connect.session_timeout"
  type="integer"
  default="Based on SignalWire settings"
>
  Time, in seconds, to set the SIP `Session-Expires` header in INVITE. Must be a positive, non-zero number. Has no effect on calls to phone numbers.
</APIField>

<APIField
  name="connect.timeout"
  type="integer"
  default="60 seconds"
>
  Maximum time, in seconds, to wait for an answer.
</APIField>

<APIField
  name="connect.transfer_after_bridge"
  type="string"
>
  SWML to execute after the bridge completes. This defines what should happen after the call is connected and the bridge ends.

  Can be either:
  - A URL (http or https) that returns a SWML document
  - An inline SWML document (as a JSON string)

  **Note:** This parameter is **REQUIRED** when connecting to a queue (when `to` starts with `queue:`)
</APIField>

<APIField
  name="connect.username"
  type="string"
>
  SIP username to use for authentication when dialing a SIP URI. Has no effect on calls to phone numbers.
</APIField>

<APIField
  name="connect.password"
  type="string"
>
  SIP password to use for authentication when dialing a SIP URI. Has no effect on calls to phone numbers.
</APIField>

<APIField
  name="connect.webrtc_media"
  type="boolean"
  default="false"
>
  If true, WebRTC media is offered to the SIP endpoint. Has no effect on calls to phone numbers. Optional. Default is `false`.
</APIField>

In addition, you are required to specify **one and only one** of the following dialing parameters:

<APIField
  name="connect.to"
  type="string"
>
  Single destination to dial. Possible values are:
  - Phone number in E.164 format (e.g., "+15552345678")
  - SIP URI (e.g., "sip:alice@example.com")
  - Call Fabric Resource address (e.g., "/public/test_room")
  - Queue (e.g., "queue:support")
</APIField>

<APIField
  name="connect.serial"
  type="object[]"
>
  Array of [`destination`](#parameters-for-destination) objects to dial in order.
</APIField>

<APIField
  name="connect.parallel"
  type="object[]"
>
  Array of [`destination`](#parameters-for-destination) objects to dial simultaneously.
</APIField>

<APIField
  name="connect.serial_parallel"
  type="object[][]"
>
  Array of arrays. Inner arrays contain [`destination`](#parameters-for-destination) objects to dial simultaneously. Outer array attempts each parallel group in order.
</APIField>

## **Parameters for `destination`**

<APIField
  name="connect.to"
  type="string"
  required={true}
>
  Destination to dial. Can be:
  - Phone number in E.164 format (e.g., "+15552345678")
  - SIP URI (e.g., "sip:alice@example.com")
  - Call Fabric Resource address (e.g., "/public/test_room")
  - Queue (e.g., "queue:support")
</APIField>

<APIField
  name="connect.from"
  type="string"
  default="Calling party's caller ID number"
>
  Caller ID number. Optional.
</APIField>

<APIField
  name="connect.timeout"
  type="integer"
  default="60 seconds"
>
  Maximum time, in seconds, to wait for destination to answer.
</APIField>

<APIField
  name="connect.call_state_url"
  type="string"
>
  Webhook url to send call state change notifications to. Authentication can also be set in the url in the format of `username:password@url`.
</APIField>

<APIField
  name="connect.call_state_events"
  type="string[]"
  default="['ended']"
>
  An array of call state event names to be notified about. Allowed event names are `created`, `ringing`, `answered`, and `ended`.
</APIField>

## **Variables**

Set by the method:

- **connect_result:** (out) `connected` | `failed`.
- **connect_failed_reason:** (out) Detailed reason for failure.
- **return_value:** (out) Same value as `connect_result`.

## **Examples**

### Use `connect` with Call Fabric {#connect-with-CF}

Use a Call Fabric Resource with the `connect` method by simply including the Resource Address.

Learn more by reading our 
[Introduction to Call Fabric](/platform/call-fabric)
or the guide to
[Managing Resources](/platform/call-fabric/resources).

```yaml andJson
version: 1.0.0
sections:
  main:
    - answer: {}
    - play:
        volume: 10
        urls:
          - 'silence:1.0'
          - 'say:Hello, connecting to a fabric Resource that is a room'
    - connect:
        to: /public/test_room
```

### Dial a single phone number

```yaml andJson
version: 1.0.0
sections:
  main:
    - connect:
        from: "+15553214321"
        to: "+15551231234"
```


### Dial numbers in parallel

```yaml andJson
version: 1.0.0
sections:
  main:
    - connect:
        parallel:
          - to: "+15551231234"
          - to: "+15553214321"
```

### Dial SIP serially with a timeout

```yaml andJson
version: 1.0.0
sections:
  main:
    - connect:
        timeout: 20
        serial:
          - from: "sip:chris@example.com"
            to: "sip:alice@example.com"
          - to: "sip:bob@example.com"
            codecs: PCMU
```

### Connect to a queue with transfer after bridge

```yaml andJson
version: 1.0.0
sections:
  main:
    - connect:
        to: "queue:support"
        transfer_after_bridge: "https://example.com/post-call-swml"
```