import APIField from "@site/src/components/APIField";

[toggle_functions]: /swml/guides/ai/toggle_functions
[set_meta_data]: /swml/guides/ai/set_meta_data
[context_switch]: /swml/guides/ai/context_switch
[parameters]: /swml/methods/ai#ai-parameters
[contexts]: /swml/methods/ai/prompt/contexts
[steps]: /swml/methods/ai/prompt/contexts/steps

<APIField
  name="action[].SWML"
  type="object"
>
  A SWML object to be executed.
</APIField>

<APIField
  name="action[].say"
  type="string"
>
  A message to be spoken by the AI agent.
</APIField>

<APIField
  name="action[].stop"
  type="boolean"
>
  Whether to stop the conversation.
</APIField>

<APIField
  name="action[].hangup"
  type="boolean"
>
  Whether to hang up the call. When set to `true`, the call will be terminated after the AI agent finishes speaking.
</APIField>

<APIField
  name="action[].hold"
  type="integer | object"
>
  Places the caller on hold while playing hold music (configured via the [`params.hold_music`](/swml/methods/ai/params/hold_music) parameter).
  During hold, speech detection is paused and the AI agent will not respond to the caller.

  The value specifies the hold timeout in seconds. Can be:
  - An integer (e.g., `120` for 120 seconds)
  - An object with a `timeout` property

  Default timeout is `300` seconds (5 minutes). Maximum timeout is `900` seconds (15 minutes).

  :::note Unholding a call
  There is no `unhold` SWAIG action because the AI agent is inactive during hold and cannot process actions.
  To take a caller off hold, either:
  - Let the hold timeout expire (the AI will automatically resume with a default message), or
  - Use the [Calling API `ai_unhold` command](/rest/signalwire-rest/endpoints/calling/call-commands) to programmatically unhold the call with a custom prompt.
  :::
</APIField>

<APIField
  name="hold.timeout"
  type="integer"
  default="300"
>
  The duration to hold the caller in seconds. Maximum is `900` seconds (15 minutes).
</APIField>

<APIField
  name="action[].change_context"
  type="string"
>
  The name of the context to switch to. The context must be defined in the AI's `prompt.contexts` configuration.
  This action triggers an immediate context switch during the execution of a SWAIG function.

  Visit the [`contexts`][contexts] documentation for details on defining contexts.
</APIField>

<APIField
  name="action[].change_step"
  type="string"
>
  The name of the step to switch to. The step must be defined in `prompt.contexts.{context_name}.steps` for the current context.
  This action triggers an immediate step transition during the execution of a SWAIG function.

  Visit the [`steps`][steps] documentation for details on defining steps.
</APIField>

<APIField
  name="action[].toggle_functions"
  type="object[]"
>
  Whether to toggle the functions on or off.

  See [`toggle_functions`][toggle_functions] for additional details.
</APIField>

<APIField
  name="toggle_functions[].active"
  type="boolean"
  default="true"
>
  Whether to activate or deactivate the functions.
</APIField>

<APIField
  name="toggle_functions[].function"
  type="object[]"
>
  A list of functions to toggle.
</APIField>

<APIField
  name="action[].set_global_data"
  type="object"
>
  A JSON object containing any global data, as a key-value map. This action sets the data in the [`global_data`][parameters] to be globally referenced.
</APIField>

<APIField
  name="action[].set_meta_data"
  type="object"
>
  A JSON object containing any metadata, as a key-value map. This action sets the data in the [`meta_data`][parameters] to be referenced locally in the function.

  See [`set_meta_data`][set_meta_data] for additional details.
</APIField>

<APIField
  name="action[].unset_global_data"
  type="string | object"
>
  The key of the global data to unset from the [`global_data`][parameters]. You can also reset the `global_data` by passing in a new object.
</APIField>

<APIField
  name="action[].unset_meta_data"
  type="string | object"
>
  The key of the metadata to unset from the [`meta_data`][parameters]. You can also reset the `meta_data` by passing in a new object.
</APIField>

<APIField
  name="action[].playback_bg"
  type="object"
>
  A JSON object containing the audio file to play.
</APIField>

<APIField
  name="playback_bg.file"
  type="string"
>
  URL or filepath of the audio file to play. Authentication can also be set in the url in the format of `username:password@url`.
</APIField>

<APIField
  name="playback_bg.wait"
  type="boolean"
  default="false"
>
  Whether to wait for the audio file to finish playing before continuing.
</APIField>

<APIField
  name="action[].stop_playback_bg"
  type="boolean"
>
  Whether to stop the background audio file.
</APIField>

<APIField
  name="action[].user_input"
  type="string"
>
  Used to inject text into the users queue as if they input the data themselves.
</APIField>

<APIField
  name="action[].context_switch"
  type="object"
>
  A JSON object containing the context to switch to.

  See [`context_switch`][context_switch] for additional details.
</APIField>

<APIField
  name="context_switch.system_prompt"
  type="string"
>
  The instructions to send to the agent.
</APIField>

<APIField
  name="context_switch.consolidate"
  type="boolean"
  default="false"
>
  Whether to consolidate the context.
</APIField>

<APIField
  name="context_switch.user_prompt"
  type="string"
>
  A string serving as simulated user input for the AI Agent. During a `context_switch` in the AI's prompt, the `user_prompt` offers the AI pre-established context or guidance.
</APIField>

{/*

DEPRECATED - see https://github.com/signalwire/signalwire-docs/issues/943

| `back_to_back_functions` | `boolean`            | Whether to execute functions back to back. Default is `false`                                                                                                                                    |

*/}


