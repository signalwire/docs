---
title: connect
sidebar_label: connect
slug: /swml/methods/connect
description: Dial a SIP URI or phone number.
tags: ['swml']
---

import APIField from "@site/src/components/APIField";

Dial a SIP URI or phone number.

<APIField
  name="connect"
  type="object"
  required={true}
>
  An object that contains the [`connect parameters`](#connect-parameters).
</APIField>


## **connect Parameters**

<APIField
  name="answer_on_bridge"
  type="boolean"
  default="false"
>
  Delay answer until the B-leg answers.
</APIField>

<APIField
  name="call_state_events"
  type="string[]"
  default="['ended']"
>
  An array of call state event names to be notified about. Allowed event names are `created`, `ringing`, `answered`, and `ended`. Can be overwritten on each [destination](#parameters-for-destination).
</APIField>

<APIField
  name="call_state_url"
  type="string"
>
  Webhook url to send call status change notifications to for all legs. Can be overwritten on each [destination](#parameters-for-destination). Authentication can also be set in the url in the format of `username:password@url`.
</APIField>

<APIField
  name="codecs"
  type="string"
  default="Based on SignalWire settings"
>
  Comma-separated string of codecs to offer. Has no effect on calls to phone numbers.
</APIField>

<APIField
  name="confirm"
  type="string"
>
  A URL that returns [SWML](/swml) to execute when the call is connected.
</APIField>

<APIField
  name="confirm_timeout"
  type="integer"
  default="60 seconds"
>
  The amount of time, in seconds, to wait for the `confirm` URL to return a response.
</APIField>

<APIField
  name="encryption"
  type="string"
  default="optional"
>
  The encryption method to use for the call.<br/>**Possible values:** `mandatory`, `optional`, `forbidden`.
</APIField>

<APIField
  name="from"
  type="string"
  default="Calling party's caller ID number"
>
  Caller ID number. Optional. Can be overwritten on each [destination](#parameters-for-destination).
</APIField>

<APIField
  name="headers"
  type="object[]"
>
  Custom SIP headers to add to INVITE. Has no effect on calls to phone numbers. The object accepts [headers parameters](./headers.mdx#headers-parameters). See [`headers`](./headers.mdx) for details.
</APIField>

<APIField
  name="max_duration"
  type="integer"
  default="14400 seconds (4 hours)"
>
  Maximum duration, in seconds, allowed for the call.
</APIField>

<APIField
  name="result"
  type="object | object[]"
>
  Action to take based on the result of the call. This will run once the peer leg of the call has ended. See [Variables](#variables) for details.<br/>Will use the [`switch method parameters`](./switch#switch-parameters) when the `return_value` is a object, and will use the [`cond method parameters`](./cond#cond-parameters) method when the `return_value` is an array.
</APIField>

<APIField
  name="ringback"
  type="string[]"
  default="Plays audio from the provider"
>
  Array of `play` URIs to play as ringback tone.
</APIField>

<APIField
  name="session_timeout"
  type="integer"
  default="Based on SignalWire settings"
>
  Time, in seconds, to set the SIP `Session-Expires` header in INVITE. Must be a positive, non-zero number. Has no effect on calls to phone numbers.
</APIField>

<APIField
  name="timeout"
  type="integer"
  default="60 seconds"
>
  Maximum time, in seconds, to wait for an answer.
</APIField>

<APIField
  name="username"
  type="string"
>
  SIP username to use for authentication when dialing a SIP URI. Has no effect on calls to phone numbers.
</APIField>

<APIField
  name="password"
  type="string"
>
  SIP password to use for authentication when dialing a SIP URI. Has no effect on calls to phone numbers.
</APIField>

<APIField
  name="webrtc_media"
  type="boolean"
  default="false"
>
  If true, WebRTC media is offered to the SIP endpoint. Has no effect on calls to phone numbers. Optional. Default is `false`.
</APIField>

In addition, you are required to specify **one and only one** of the following dialing parameters:

<APIField
  name="to"
  type="string"
>
  Single destination to dial. Possible values are a phone number (i.e.: "+15552345678") or sip uri (i.e. "sip:alice@example.com").
</APIField>

<APIField
  name="serial"
  type="object[]"
>
  Array of [`destination`](#parameters-for-destination) objects to dial in order.
</APIField>

<APIField
  name="parallel"
  type="object[]"
>
  Array of [`destination`](#parameters-for-destination) objects to dial simultaneously.
</APIField>

<APIField
  name="serial_parallel"
  type="object[][]"
>
  Array of arrays. Inner arrays contain [`destination`](#parameters-for-destination) objects to dial simultaneously. Outer array attempts each parallel group in order.
</APIField>

## **Parameters for `destination`**

<APIField
  name="to"
  type="string"
  required={true}
>
  Phone number or SIP URI to dial.
</APIField>

<APIField
  name="from"
  type="string"
  default="Calling party's caller ID number"
>
  Caller ID number. Optional.
</APIField>

<APIField
  name="timeout"
  type="integer"
  default="60 seconds"
>
  Maximum time, in seconds, to wait for destination to answer.
</APIField>

<APIField
  name="call_state_url"
  type="string"
>
  Webhook url to send call state change notifications to. Authentication can also be set in the url in the format of `username:password@url`.
</APIField>

<APIField
  name="call_state_events"
  type="string[]"
  default="['ended']"
>
  An array of call state event names to be notified about. Allowed event names are `created`, `ringing`, `answered`, and `ended`.
</APIField>

## **Variables**

Set by the method:

- **connect_result:** (out) `connected` | `failed`.
- **connect_failed_reason:** (out) Detailed reason for failure.
- **return_value:** (out) Same value as `connect_result`.

## **Examples**

### Use `connect` with Call Fabric {#connect-with-CF}

Use a Call Fabric Resource with the `connect` method by simply including the Resource Address.

Learn more by reading our 
[Introduction to Call Fabric](/platform/call-fabric)
or the guide to
[Managing Resources](/platform/call-fabric/resources).

```yaml andJson
version: 1.0.0
sections:
  main:
    - answer: {}
    - play:
        volume: 10
        urls:
          - 'silence:1.0'
          - 'say:Hello, connecting to a fabric Resource that is a room'
    - connect:
        to: /public/test_room
```

### Dial a single phone number

```yaml andJson
version: 1.0.0
sections:
  main:
    - connect:
        from: "+15553214321"
        to: "+15551231234"
```

{/* This does not actually work - need amd for voicemail to work properly.

### Dial a single phone number and go to voicemail on failure

```yaml andJson
version: 1.0.0
sections:
  main:
    - connect:
        from: '${call.from}'
        to: '+15551231234'
        result:
          variable: vars.call_state
          case:
            answered:
              - play:
                  url: 'say: We are connected.'
              - hangup: {}
          default:
            - execute:
                dest: voicemail
            - hangup: {}
  voicemail:
    - play:
        urls:
          - 'say:I''m sorry the person you are trying to reach is not available'
          - 'say:Please leave a message after the tone'
    - record:
        beep: true
```
*/}

### Dial numbers in parallel

```yaml andJson
version: 1.0.0
sections:
  main:
    - connect:
        parallel:
          - to: "+15551231234"
          - to: "+15553214321"
```

### Dial SIP serially with a timeout

```yaml andJson
version: 1.0.0
sections:
  main:
    - connect:
        timeout: 20
        serial:
          - from: "sip:chris@example.com"
            to: "sip:alice@example.com"
          - to: "sip:bob@example.com"
            codecs: PCMU
```