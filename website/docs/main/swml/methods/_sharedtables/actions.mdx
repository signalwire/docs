import APIField from "@site/src/components/APIField";

[toggle_functions]: /swml/guides/ai/toggle_functions
[set_meta_data]: /swml/guides/ai/set_meta_data
[context_switch]: /swml/guides/ai/context_switch
[parameters]: /swml/methods/ai#ai-parameters
[actions]: #actions

When a SWAIG function is executed, the functions expects the user to respond with a JSON object that contains a `response` key and an optional `action` key.
This request response is used to provide the LLM with a new prompt response via the `response` key and to execute SWML-compatible objects that will perform
new dialplan actions via the `action` key.

<APIField
  name="response"
  type="string"
  required={true}
>
  Static text that will be added to the AI agent's context.
</APIField>

<APIField
  name="action"
  type="[object](#actions)[]"
>
  A list of SWML-compatible objects that are executed upon the execution of a SWAIG function.
</APIField>


## List of valid actions {#actions}

<APIField
  name="SWML"
  type="object"
>
  A SWML object to be executed.
</APIField>

<APIField
  name="say"
  type="string"
>
  A message to be spoken by the AI agent.
</APIField>

<APIField
  name="stop"
  type="boolean"
>
  Whether to stop the conversation.
</APIField>

<APIField
  name="toggle_functions"
  type="[object](/swml/guides/ai/toggle_functions)[]"
>
  Whether to toggle the functions on or off.
</APIField>

<APIField
  name="toggle_functions.active"
  type="boolean"
  default="true"
>
  Whether to activate or deactivate the functions.
</APIField>

<APIField
  name="toggle_functions.function"
  type="object[]"
>
  A list of functions to toggle.
</APIField>

<APIField
  name="set_global_data"
  type="object"
>
  A JSON object containing any global data, as a key-value map. This action sets the data in the [`global_data`][parameters] to be globally referenced.
</APIField>

<APIField
  name="set_meta_data"
  type="[object](/swml/guides/ai/set_meta_data)"
>
  A JSON object containing any metadata, as a key-value map. This action sets the data in the [`meta_data`][parameters] to be referenced locally in the function.
</APIField>

<APIField
  name="unset_global_data"
  type="string | object"
>
  The key of the global data to unset from the [`global_data`][parameters]. You can also reset the `global_data` by passing in a new object.
</APIField>

<APIField
  name="unset_meta_data"
  type="string | object"
>
  The key of the metadata to unset from the [`meta_data`][parameters]. You can also reset the `meta_data` by passing in a new object.
</APIField>

<APIField
  name="playback_bg"
  type="object"
>
  A JSON object containing the audio file to play.
</APIField>

<APIField
  name="playback_bg.file"
  type="string"
>
  URL or filepath of the audio file to play. Authentication can also be set in the url in the format of `username:password@url`.
</APIField>

<APIField
  name="playback_bg.wait"
  type="boolean"
  default="false"
>
  Whether to wait for the audio file to finish playing before continuing.
</APIField>

<APIField
  name="stop_playback_bg"
  type="boolean"
>
  Whether to stop the background audio file.
</APIField>

<APIField
  name="user_input"
  type="string"
>
  Used to inject text into the users queue as if they input the data themselves.
</APIField>

<APIField
  name="context_switch"
  type="[object](/swml/guides/ai/context_switch)"
>
  A JSON object containing the context to switch to.
</APIField>

<APIField
  name="context_switch.system_prompt"
  type="string"
>
  The instructions to send to the agent.
</APIField>

<APIField
  name="context_switch.consolidate"
  type="boolean"
  default="false"
>
  Whether to consolidate the context.
</APIField>

<APIField
  name="context_switch.user_prompt"
  type="string"
>
  A string serving as simulated user input for the AI Agent. During a `context_switch` in the AI's prompt, the `user_prompt` offers the AI pre-established context or guidance.
</APIField>

{/*

DEPRECATED - see https://github.com/signalwire/signalwire-docs/issues/943

| `back_to_back_functions` | `boolean`            | Whether to execute functions back to back. Default is `false`                                                                                                                                    |

*/}


