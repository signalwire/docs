---
title: Chain of Thought Prompting for SignalWire AI Agents
slug: /ai/get-started/prompt-engineering/advanced-techniques/chain-of-thought
description: Guide AI agents through structured reasoning processes to solve complex problems and deliver better results.
draft: true
---

import Admonition from '@theme/Admonition';

# Chain of Thought Prompting

<Subtitle>Guide AI through logical reasoning steps for complex problem-solving</Subtitle>

## What is Chain of Thought Prompting?

Chain of Thought (CoT) prompting is an advanced technique that guides AI models through explicit reasoning steps before arriving at a final answer. Rather than directly requesting a solution, CoT prompting encourages the AI to "think aloud" by breaking down complex problems into logical steps, making intermediate reasoning visible, and then deriving conclusions from this structured thinking process.

This approach is particularly valuable for SignalWire AI Agents handling complex troubleshooting, multi-step decision-making, or situations requiring careful analysis of various factors.

## Benefits of Chain of Thought Prompting

Chain of Thought prompting offers several key advantages for SignalWire AI Agents:

### Enhanced Accuracy

By decomposing complex problems into a series of simpler reasoning steps, CoT prompting helps the AI avoid mistakes that might occur when attempting to solve problems in a single leap. This systematic approach leads to more accurate, reliable responses.

### Improved Transparency

The explicit reasoning process makes the AI's thinking visible and understandable to users. This transparency helps build trust as users can follow the logical path from question to answer.

### Better Context Management

Complex problems often involve multiple pieces of information that must be considered together. CoT helps the AI maintain focus on relevant information throughout the reasoning process.

### Error Recovery

When mistakes occur, they're easier to identify and correct since each step in the reasoning chain can be examined separately. This allows for more targeted refinement of prompts.

### Handling Ambiguity

For questions with multiple possible interpretations, CoT prompting allows the AI to explore different reasoning paths and select the most appropriate one based on available information.

## Implementing Chain of Thought Prompting

Let's explore how to effectively implement Chain of Thought prompting with SignalWire AI Agents.

### Basic Structure

A typical Chain of Thought prompt follows this structure:

```markdown
Please solve this problem step-by-step:

[Problem description]

Think through this logically:
1. First, identify the key elements of the problem
2. Next, determine how these elements relate to each other
3. Apply the relevant principles or formulas
4. Calculate or derive the solution
5. Verify that the solution makes sense in context
```

### Implementation Methods

There are several ways to implement Chain of Thought prompting:

#### Method 1: Direct Instruction

Explicitly instruct the AI to reason step by step:

```markdown
Please troubleshoot this SignalWire Video API issue step by step:

Customer reports: "Users can connect to video rooms but cannot see each other's video feeds."

Reasoning process:
1. First, identify possible causes for this specific symptom
2. For each potential cause, list the diagnostic indicators
3. Suggest tests to determine which cause is most likely
4. Based on the most probable cause, recommend specific solutions
5. Provide verification steps to confirm the issue is resolved
```

#### Method 2: Demonstration Through Examples

Show the AI examples of step-by-step reasoning:

```markdown
When troubleshooting SignalWire API issues, please use the following reasoning approach:

Example 1:
Problem: "I keep getting 401 errors when trying to make API calls."

Reasoning:
1. A 401 error indicates an authentication problem.
2. There are three potential causes: invalid credentials, expired tokens, or incorrect authentication method.
3. Looking at the request headers, I notice the Authorization header is using Bearer format but the API key is being used directly.
4. The correct format should be Basic authentication with Project ID and API token.
5. Therefore, the solution is to update the authentication method to use Basic auth with the proper credentials.

Example 2:
Problem: "Voice calls connect but there's no audio in either direction."

Reasoning:
1. No audio in either direction suggests a media connectivity issue rather than a one-way audio problem.
2. This typically happens when media packets cannot flow between endpoints.
3. Common causes include: firewall blocking UDP ports, NAT traversal issues, or incorrect ICE servers configuration.
4. Looking at the client logs, I can see ICE connectivity failures, indicating the media can't establish a path.
5. The solution is to ensure UDP ports 10000-20000 are open and to verify the TURN server configuration.

Now, please use this same reasoning approach for the following problem:
[Customer problem]
```

#### Method 3: Zero-Shot Chain of Thought

Simply use the phrase "Let's think step by step" to trigger chain-of-thought reasoning:

```markdown
Customer issue: "We're experiencing random disconnects in our video conferences, especially when there are more than 8 participants."

Let's think step by step about what could be causing this issue and how to resolve it.
```

### SignalWire-Specific Implementations

Here are examples of Chain of Thought prompting tailored specifically for common SignalWire AI Agent use cases:

#### Technical Troubleshooting

```markdown
# API Troubleshooting Reasoning Framework

When a customer reports an API integration issue, follow this reasoning process:

1. **Symptom Identification**
   - Identify the specific error messages or unexpected behaviors
   - Determine which API endpoint or SDK method is involved
   - Note the environments where the issue occurs (browser, device, network)

2. **Contextual Analysis**
   - Consider which authentication mechanism is being used
   - Identify which SDK version or API version the customer is using
   - Determine if the issue is intermittent or consistent

3. **Hypothesis Formation**
   - Generate 2-3 most likely causes based on the symptoms
   - Rank these hypotheses from most to least probable
   - Consider both common mistakes and edge case scenarios

4. **Evidence Collection**
   - Request specific information needed to validate each hypothesis
   - Ask for relevant code snippets or logs (with sensitive data removed)
   - Determine if the issue is reproducible with specific steps

5. **Solution Development**
   - Start with the most likely solution based on confirmed hypothesis
   - Provide clear, actionable implementation guidance
   - Include both immediate fixes and long-term best practices

6. **Verification Planning**
   - Suggest specific tests to confirm the solution worked
   - Provide expected outcomes or success indicators
   - Include potential fallback options if the primary solution fails
```

#### Product Recommendation

```markdown
# Product Recommendation Reasoning Process

When guiding customers to the appropriate SignalWire services, reason through:

1. **Requirement Gathering**
   - Identify the customer's core communication needs (voice, video, messaging)
   - Determine scale requirements (user count, concurrent sessions, geographic distribution)
   - Understand technical constraints and existing infrastructure

2. **Capability Mapping**
   - Match customer requirements to specific SignalWire products
   - Identify which features align with their core needs
   - Note any potential gaps or limitations

3. **Constraint Analysis**
   - Consider budget constraints and compare with pricing models
   - Evaluate technical expertise required for implementation
   - Assess timeline requirements versus implementation complexity

4. **Alternative Comparison**
   - Compare viable options across key dimensions
   - Weigh pros and cons of each approach
   - Consider both immediate needs and future scalability

5. **Recommendation Formulation**
   - Present primary recommendation with clear justification
   - Suggest implementation approach or architecture
   - Include potential upgrade paths or expansions
```

## Best Practices for Chain of Thought Prompting

### Clarity and Structure

Ensure your CoT prompts have clear, logical structure:

```markdown
# Clear Reasoning Structure

## Problem Decomposition
- Break the initial problem into defined sub-problems
- Order sub-problems in a logical sequence
- Identify dependencies between components

## Step Progression
- Ensure each step builds logically on previous steps
- Use clear transitions between reasoning stages
- Maintain appropriate detail level throughout

## Verification Loops
- Include self-verification at critical points
- Encourage checking of intermediate conclusions
- Build in backtracking if contradictions arise
```

### Voice and Video Considerations

When implementing Chain of Thought for real-time voice or video interactions, consider these special factors:

```markdown
# Voice/Video CoT Adaptations

## Pacing Guidelines
- Keep reasoning units short enough for verbal delivery (15-30 seconds)
- Include natural pause points between reasoning steps
- Use verbal signposting to mark transitions between steps

## Engagement Maintenance
- Intersperse reasoning with quick confirmation checks
- Use varied vocal patterns when delivering different reasoning stages
- Include brief summaries after complex reasoning chains

## Multimodal Considerations
- For video interactions, consider synchronized visual aids
- Design reasoning that works in audio-only fallback situations
- Structure key conclusions to be clear without visual support
```

### Complexity Management

Balance comprehensiveness with clarity:

```markdown
# Complexity Management Techniques

## Appropriate Depth
- Match reasoning depth to problem complexity
- Avoid unnecessary steps for simple issues
- Expand reasoning only when required for accuracy

## Information Chunking
- Group related reasoning components
- Limit to 3-5 main reasoning blocks
- Summarize before moving to new reasoning section

## Progressive Disclosure
- Start with high-level reasoning approach
- Drill into details only as needed
- Allow for user-directed exploration of specific reasoning branches
```

<Admonition type="warning">
For voice interactions, be mindful of cognitive load and attention spans. Even the best chain-of-thought reasoning can overwhelm users if delivered as one continuous stream. Use appropriate pacing and check for understanding between major reasoning segments.
</Admonition>

## Examples of Effective Chain of Thought Prompts

### Example 1: API Error Troubleshooting

```markdown
# API Error Troubleshooting CoT

You are a SignalWire API specialist helping a customer resolve a recurring issue with their Voice API implementation. Use chain-of-thought reasoning to troubleshoot this issue:

Customer reports: "We're trying to implement call recording, but we keep getting 'Error 31002' when attempting to start recording."

Reasoning approach:

1. **Error Identification**
   First, identify what Error 31002 specifically means in the SignalWire Voice API context.
   Error 31002 indicates "Resource not found" - meaning the system cannot find the call that's being referenced.

2. **Potential Cause Analysis**
   Consider the most common reasons for a "resource not found" error:
   - The Call SID being referenced might be invalid or expired
   - The call might have already ended when recording was attempted
   - The request might be targeting the wrong SignalWire Space or project
   - There might be a timing issue between call creation and recording start

3. **Implementation Examination**
   Based on these possibilities, analyze the typical implementation pattern:
   - When is the recording request being made relative to call establishment?
   - How is the Call SID being captured and passed to the recording function?
   - Is there proper error handling and retry logic?

4. **Most Likely Scenario**
   The most common cause of this error is timing-related - attempting to record a call that has already ended or trying to start recording before the call is fully established.

5. **Solution Development**
   Recommend implementing the following:
   - Add status checking before attempting to start recording
   - Implement recording via REST API immediately after call connects
   - Add appropriate error handling with informative logging
   - Consider using recording auto-start in the SWML <dial> verb instead

6. **Implementation Guidance**
   Provide specific code example:
   ```javascript
   // Check call is live before recording
   client.calls(callSid).fetch()
     .then(call => {
       if(call.status === 'in-progress') {
         return client.calls(callSid).recordings.create();
       } else {
         console.log(`Cannot record call ${callSid} - status is ${call.status}`);
       }
     })
     .catch(error => console.error(`Error: ${error.message}`));
   ```

7. **Verification Step**
   Suggest testing with:
   - Artificial delay before recording to ensure call is established
   - Logging call status immediately before recording attempt
   - Implementing webhook handlers for call.recording-failed events
```

### Example 2: Video Quality Optimization

```markdown
# Video Quality Optimization CoT

You are helping a customer optimize their SignalWire Video implementation for a telemedicine application. Use chain-of-thought reasoning to address their concerns:

Customer reports: "Doctors are complaining about inconsistent video quality during patient consultations, particularly with patients in rural areas."

Let's analyze this step by step:

1. **Problem Characterization**
   First, let's identify the specific video quality issues that could be occurring:
   - Resolution degradation (pixelation)
   - Frame rate drops (stuttering/freezing)
   - Audio/video sync issues
   - Connection instability (disconnects)
   
   Based on the mention of rural areas, bandwidth limitations and network instability are likely key factors.

2. **Environmental Assessment**
   Let's consider the environment where this is occurring:
   - Rural users likely have variable and potentially limited bandwidth
   - Possible range of devices being used by patients (old smartphones, tablets, laptops)
   - Healthcare setting requires higher quality for medical assessment
   - Session duration is likely 15+ minutes (typical consultation length)

3. **Technical Factor Analysis**
   From a technical perspective, several factors could be contributing:
   - Default bandwidth settings may be too aggressive for limited connections
   - Adaptability settings might not be optimized for fluctuating networks
   - Device capabilities may vary widely among patients
   - CPU usage during long sessions might be affecting performance

4. **Solution Approach Development**
   Based on this analysis, we need a multi-faceted approach:
   
   A. Network Adaptation Improvements:
   - Implement more aggressive bandwidth adaptation algorithms
   - Prioritize connection stability over highest quality
   - Configure faster downgrade response to network fluctuations
   
   B. Patient-Side Optimization:
   - Create pre-consultation connection test
   - Provide simplified device setup guidance for patients
   - Automatically adjust quality based on device capability detection
   
   C. Doctor-Side Enhancements:
   - Provide connection quality indicators for patient connections
   - Allow manual quality adjustment during sessions
   - Implement one-way video fallback option for very limited connections

5. **Technical Implementation**
   The most effective approach would include:
   
   ```javascript
   // Configure adaptive streaming with conservative defaults
   room.on('participantConnected', participant => {
     // Start with lower quality and scale up if network permits
     participant.videoTrack.setSimulcastLayers({
       low: { maxBitrate: 100000, maxFramerate: 15 },
       medium: { maxBitrate: 300000, maxFramerate: 20 },
       high: { maxBitrate: 750000, maxFramerate: 30 }
     });
     
     // Set aggressive adaptation policy
     participant.setNetworkPriority('high');
     participant.enableDynamicBitrate({
       aggressiveness: 'high',
       prioritizeFramerate: true,
       recoveryDelay: 3000 // Quick recovery attempt
     });
     
     // Monitor and log quality metrics for analysis
     participant.on('statisticsUpdated', stats => {
       logQualityMetrics(participant.identity, stats);
     });
   });
   ```

6. **Testing and Validation Plan**
   To ensure the solution works:
   - Implement A/B testing with a subset of consultations
   - Create a feedback mechanism specifically about video quality
   - Set up automated quality metrics collection
   - Establish baseline vs. optimized performance measurements

7. **Progressive Rollout Strategy**
   Finally, recommend:
   - Rolling out changes to a test group first
   - Prioritizing doctors with highest rural patient loads
   - Providing both technical changes and patient guidance simultaneously
   - Collecting structured feedback for further optimization
```

## Combining Chain of Thought with Other Techniques

Chain of Thought prompting can be combined with other advanced techniques for even more powerful results:

### CoT + Multishot Prompting

```markdown
# Call Flow Design Analysis

When designing SignalWire call flows, analyze requirements step by step as shown in these examples:

Example 1:
Customer requirement: "We need an IVR for our sales department that routes callers to the right specialist."

Step-by-step analysis:
1. First, I'll identify the core requirement: intelligent call routing based on caller selection.
2. This requires capturing user input through DTMF or speech recognition.
3. The flow will need menu options that map to different departments.
4. We'll need to maintain business hours awareness for proper routing.
5. We should include queue management for specialists when all are busy.
6. Fallback options are needed for invalid selections or after-hours calls.
7. Therefore, I recommend a SWML application with:
   - Initial greeting with menu options
   - Input collection via <gather>
   - Conditional branching based on selection
   - Queue implementation with position announcements
   - Voicemail fallback for after-hours or overflow

Example 2:
Customer requirement: "We need to send appointment reminders to patients and allow them to confirm or reschedule."

Step-by-step analysis:
1. This requires both outbound calling capability and interactive response collection.
2. The system needs to connect with an appointment database to get scheduling information.
3. Patients need clear options: confirm, reschedule, or speak to receptionist.
4. Response data must be recorded and synced back to the appointment system.
5. There should be retry logic for no-answers or busy signals.
6. Therefore, I recommend:
   - REST API integration with the appointment system
   - Scheduled outbound calls via the Calling API
   - SWML application for interactive prompts
   - Webhook configuration to update appointment status
   - Follow-up SMS for additional confirmation

Now, please analyze this requirement using the same step-by-step approach:
Customer requirement: "We need to implement a secure payment system for our phone orders."
```

### CoT + RISEN Framework

```markdown
# ROLE:
You are a SignalWire Communications Architect specializing in contact center solutions.

# INFORMATION:
SignalWire offers voice, video, and messaging APIs that can be used to build contact center solutions.
Key features include ACD (Automatic Call Distribution), IVR (Interactive Voice Response), 
call recording, and integration capabilities with CRM systems.

# STEPS:
Follow this reasoning process for contact center design:

1. **Requirement Analysis**
   - Identify call volume and patterns
   - Determine agent staffing and skills
   - Map customer journey touchpoints

2. **Architecture Planning**
   - Design call routing logic
   - Plan queue management approach
   - Structure agent availability handling

3. **Integration Strategy**
   - Identify CRM and data systems
   - Plan data exchange workflows
   - Design authentication mechanisms

4. **Implementation Roadmap**
   - Prioritize features for phased delivery
   - Identify technical dependencies
   - Create testing and validation approach

# EXAMPLES:
Customer: "We need to upgrade our 10-agent support center to handle growing call volume."

Reasoning process:
1. **Requirement Analysis**
   First, I need to understand current limitations and growth projections:
   - Current system handles how many concurrent calls? Likely 10-15 if it's a 10-agent center
   - What's the projected growth? Undefined, but let's assume 2-3x
   - What are current pain points? Likely queue management and reporting based on size

2. **Architecture Planning**
   Based on this analysis, key architectural components needed:
   - Scalable call queue system to handle 2-3x current volume
   - Dynamic agent assignment based on availability and skills
   - Real-time dashboard for queue monitoring and management
   - Call analytics to optimize staffing and identify patterns

3. **Integration Strategy**
   For effectiveness, we should integrate with:
   - Existing CRM to provide context for incoming calls
   - Staff scheduling system to align with agent availability
   - Knowledge base for quick information access during calls

4. **Implementation Roadmap**
   Recommend phased approach:
   Phase 1: Implement core calling infrastructure with improved queuing
   Phase 2: Add agent desktop integration with CRM
   Phase 3: Implement analytics and optimization tools

# NORMS:
- Always consider both immediate needs and future scalability
- Present multiple architectural options when requirements allow
- Prioritize reliability and call quality over advanced features
- Ensure compliance with relevant communication regulations

Now, using this chain of thought approach, please analyze this customer requirement:
"We're a healthcare provider needing to implement a patient appointment reminder system."
```

## Troubleshooting Chain of Thought Implementations

### Common Issues and Solutions

If your Chain of Thought prompting isn't producing the expected results, consider these common issues and solutions:

#### Problem: Reasoning Steps Are Too Superficial

If the AI's reasoning lacks depth or skips important considerations:

```markdown
# Depth Enhancement Techniques

- Explicitly request detailed reasoning at each step
- Provide a minimum word count for each reasoning component
- Ask for multiple perspectives or approaches for critical steps
- Request explicit consideration of edge cases and exceptions
- Include prompts for uncertainty assessment at key decision points
```

#### Problem: Reasoning Is Disorganized

If the reasoning flow lacks coherence or jumps between topics:

```markdown
# Structure Reinforcement Approaches

- Provide explicit numbering for each reasoning step
- Include clear transition requirements between steps
- Request summarization at the end of each major reasoning section
- Specify hierarchical organization (main points and sub-points)
- Ask for explicit connections between related reasoning components
```

#### Problem: Conclusions Don't Follow from Reasoning

If the final conclusions seem disconnected from the reasoning process:

```markdown
# Logical Flow Improvement

- Request explicit linking of conclusions to specific reasoning steps
- Add a verification step for checking conclusion validity
- Include a requirement to identify potential logical fallacies
- Ask for alternative conclusions that could be drawn from the same reasoning
- Implement a "therefore statement" requirement for each major conclusion
```

## Next Steps

Now that you understand Chain of Thought prompting, you can:

- Combine it with [Multishot Prompting](/ai/get-started/prompt-engineering/advanced-techniques/multishot-prompting) techniques
- Integrate it with the [RISEN Framework](/ai/get-started/prompt-engineering/advanced-techniques/risen-framework)
- Adapt it for [Managing Long Context Windows](/ai/get-started/prompt-engineering/advanced-techniques/managing-long-context)

Return to the [Advanced Techniques](/ai/get-started/prompt-engineering/advanced-techniques) overview to explore more sophisticated prompt engineering approaches. 