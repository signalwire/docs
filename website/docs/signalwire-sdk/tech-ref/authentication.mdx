---
title: "Authentication"
sidebar_position: 1
---

# Authentication

The SignalWire SDK uses the same authentication methods as the REST API.


### REST API Token Authentication

You can obtain authentication tokens directly through the REST API. The following endpoints are available for token generation:

import { TbApi } from "react-icons/tb";

<CardGroup cols={3}>
<Card 
  title="Create a Guest Token" 
  icon={<TbApi/>} 
  href="/rest/signalwire-rest/endpoints/fabric/guest-tokens-create"
>
  Generate a limited-access token for guest access to specific Fabric addresses. 
</Card>
<Card 
  title="Create a Subscriber Invite Token" 
  icon={<TbApi/>} 
  href="/rest/signalwire-rest/endpoints/fabric/invite-tokens-create"
>
  Generate a token to access resources associated with a specific subscriber on behalf of the subscriber.
</Card>
<Card 
  title="Create a new Subscriber and a Token" 
  icon={<TbApi/>} 
  href="/rest/signalwire-rest/endpoints/fabric/subscriber-tokens-create"
>
  Create a new subscriber and get their token in a single request.
</Card>
</CardGroup>

:::info
For browser-based applications, we recommend using the OAuth2 flow to 
authenticate subscribers and obtain tokens. See 
[Authenticate subscribers using OAuth2](#authenticate-subscribers-using-oauth2) below for details.
:::

#### Using the Token

The endpoints return a JSON object containing a `token` property. Use this token to initialize the [SignalWire Client][SignalWire Client]:

```js
import { SignalWire } from "@signalwire/js";

const client = await SignalWire({
  token: "eyJhbGciOiJIUzI1NiIs..."
});
```


### Authenticate subscribers using OAuth2

When you create a Subscriber, you assign them a username (email) and a password. These credentials
can be used authenticate the subscriber using the standard OAuth2 flow with PKCE. For OAuth2, you
can use tools like [odic-client-ts](https://github.com/authts/oidc-client-ts) or
[react-native-app-auth](https://github.com/FormidableLabs/react-native-app-auth).

You can also use this [node.js script](https://github.com/signalwire-community/react/tree/main/scripts/refresh-fabric-tokens)
from [SignalWire Community](https://github.com/signalwire-community) to get a token for a subscriber.

:::info
Currently, the only way to get a client ID for the OAuth2 flow is through the SignalWire Support team.
:::

<Tabs>
<TabItem label="oidc-client-ts" value="web">

```js
import { UserManager, WebStorageStateStore } from "oidc-client-ts";

const config = {
  authority: "x", // dummy authority
  metadata: {
    issuer: "https://id.fabric.signalwire.com/",
    authorization_endpoint: "https://id.fabric.signalwire.com/login/oauth/authorize",
    token_endpoint: "https://id.fabric.signalwire.com/oauth/token",
  },
  client_id: "<Your_Fabric_Client_id>",
  redirect_uri: "https://redirect_uri",
  response_type: "code",
  userStore: new WebStorageStateStore({ store: window.localStorage }),
};

const userManager = new UserManager(config);

await userManager.signinRedirect();
```

</TabItem>

<TabItem label="react-native-app-auth" value="mobile">

```js
import { authorize } from "react-native-app-auth";

const config = {
  serviceConfiguration: {
    authorizationEndpoint: "https://id.fabric.signalwire.com/login/oauth/authorize",
    tokenEndpoint: "https://id.fabric.signalwire.com/oauth/token",
  },

  clientId: "<Your_Fabric_Client_id>",
  redirectUrl: "your app's redirect uri",
  clientAuthMethod: "post",
};

const result = await authorize(config);
```

</TabItem>
</Tabs>

A complete example is presented below.
Assuming that this page is [`npx serve`d](https://www.npmjs.com/package/serve) at the address `http://localhost:3000`, this script takes the subscriber
through the OAuth2 login flow, and uses the access token received to fetch the subscriber's registration details from SignalWire.

{/* prettier-ignore */}
```html title="index.html"
<html>
  <head>
    <style>
      .loading > button { display: none }
      .loading::after { content: "Loading..." }
    </style>
  </head>

  <body>
    <div id="container" class="loading">
      <button onclick="userManager.signinRedirect()">Log In</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/oidc-client-ts@3.0.1/dist/browser/oidc-client-ts.min.js"></script>
    <script src="https://cdn.signalwire.com/@signalwire/js"></script>
    <script>
      const container = document.getElementById("container");

      const config = {
        authority: "x", // dummy authority
        metadata: {
          issuer: "https://id.fabric.signalwire.com/",
          authorization_endpoint: "https://id.fabric.signalwire.com/login/oauth/authorize",
          token_endpoint: "https://id.fabric.signalwire.com/oauth/token",
        },
        client_id: "<Your_Fabric_Client_id>",
        redirect_uri: "http://localhost:3000", // assuming this page is being served at port 3000 of localhost
        response_type: "code",
        userStore: new oidc.WebStorageStateStore({ store: window.localStorage }),
      };

      const userManager = new oidc.UserManager(config);

      async function checkForRedirect() {
        try {
          const user = await userManager.signinRedirectCallback();
          if (user) {
            // the oauth flow completed successfully, we can now use Call Fabric features using the access token.
            await getSubscriberInfo(user.access_token);
          }
        } catch (e) {
          // signinRedirectCallback failed; login flow hasn't been started yet. We'll show the Login button.
          container.classList.remove("loading");
        }
      }

      async function getSubscriberInfo(token) {
        const client = await SignalWire.SignalWire({ token });
        const subInfo = await client.getSubscriberInfo();

        container.classList.remove("loading");
        container.innerText = `Hello, ${subInfo.first_name}`;
      }

      // We want to check if the user was redirected here from the subscriber login flow,
      // or if the came here directly from the browser. If the user came directly from the 
      // browser, we show a Login button. If they were redirected here, we allow oidc-client-ts
      // to finish the flow and get the access token.
      checkForRedirect();
    </script>
  </body>
</html>
```