---
title: setLocalStream
slug: /call-session/setlocalstream
description: Replaces the current local media stream with a custom MediaStream.
---

import APIField from '@site/src/components/APIField';

Replaces the current local media stream with a custom MediaStream.

## Parameters

<APIField name="stream" type="MediaStream" required>
  The MediaStream to use as the new local stream.
</APIField>

## Signature

```typescript
call.setLocalStream(stream: MediaStream): Promise<MediaStream>
```

## Returns

**Type:** `Promise<MediaStream>`

Returns the MediaStream that was set.

## Example

```typescript
// Initialize client and start a call
const client = await SignalWire({ token: '<your-token>' })
const call = await client.dial({ to: '/public/example' })

// Create a custom media stream with specific constraints
const customStream = await navigator.mediaDevices.getUserMedia({
  audio: true,
  video: { width: 1920, height: 1080 }
})

// Replace the call's local stream
await call.setLocalStream(customStream)
```

## Related Properties

Access the current local media stream:

- `call.localStream` - Current local MediaStream
- `call.localAudioTrack` - Current local audio track
- `call.localVideoTrack` - Current local video track

## Important Notes

**Full Stream Replacement:** This method replaces the entire local media stream (both audio and video tracks). If you only want to replace the camera or microphone, use `updateCamera()` or `updateMicrophone()` instead.

**Advanced Use Case:** This method is primarily for advanced scenarios where you need complete control over the media stream, such as:
- Using canvas or WebGL as video source
- Applying custom audio/video processing
- Using pre-recorded media files
- Implementing virtual backgrounds or filters

**Track Management:** You are responsible for managing the lifecycle of tracks in the custom stream. Make sure to properly stop old tracks when replacing streams to avoid resource leaks.

**Stream Requirements:** The MediaStream can contain:
- Audio tracks, video tracks, or both
- **If the stream has no audio tracks:** Audio remains unaffected (existing audio continues)
- **If the stream has no video tracks:** Video remains unaffected (existing video continues)
- Tracks must be in the correct state (not ended/stopped)

This allows you to replace only audio or only video by providing a stream with just the desired track type.

**Mute State Preserved:** The current mute state (audio/video) is preserved when replacing the stream. If the call was muted, the new stream will also be muted.
